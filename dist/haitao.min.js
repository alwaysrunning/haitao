/*! haitao 04-05-2016 */
!function(a,b){"use strict";function c(a,b){for(var c=0;c<a.length;c+=1)if(b(a[c],c,a)===!1)return}function d(a){var b=0,c="";a=c+=a.substr(b);var d=a.match(/:([^\/]+)/gi);return d?"([._a-zA-Z0-9-%()]+)":void 0}var e=function(){};e.VERSION="0.0.1",a.haitao=e,e.isObject=function(a){return"[object Object]"==Object.prototype.toString.call(a)},e.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},e.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},e.extend=function(a){if(!e.isObject(a))return!1;for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},e.findDom=function(c,d){var e,f=c.replace(/\s/g,""),g=f[0],h=f.slice(1),i=d===b?a.document:d,j=[];switch(g){case"#":e=i.getElementById(h);break;case"=":e=i.getElementsByTagName(h);break;case"@":e=i.getElementsByName(h);break;case".":for(var k=i.getElementsByTagName("*"),l=0;l<k.length;l++)k[l].className==h&&j.push(k[l])}return e||j},e.get=function(a,b,c){e.send(a,"GET",c,b)},e.load=function(a,b,c){e.send(a,"GET",c,b)},e.send=function(b,c,d,f){var g,h=f||null;g=a.XMLHttpRequest?new a.XMLHttpRequest:new a.ActiveXObject("Microsoft.XMLHTTP"),e.isObject(h)&&(h=e.formatParams(h)),"GET"==c?(g.open(c,b+"?"+h,!0),g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(null)):"POST"==c&&(g.open(c,b,!0),g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(h)),e.isFunction(d)&&(g.onreadystatechange=function(){4!==g.readyState||200!==g.status&&0!==g.status||d(g.responseText)})},e.formatParams=function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.push(("v="+Math.random()).replace(".","")),b.join("&")};var f={_listeners:{},addEvent:function(a,b){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),e.isFunction(b)&&this._listeners[a].push(b),this},fireEvent:function(a){var b=this._listeners[a];if(!e.isArray(b))return this;for(var c=0;c<b.length;c++)b[c].apply({},Array.prototype.slice.call(arguments,1));return this},removeEvent:function(a,b){if(!b)return delete this._listeners[a],this;for(var c=this._listeners[a],d=0;d<c.length;d++)c[d]==b&&c.splice(d,1);return this}};e.prototype=e.extend(e.prototype,f);var g={init:function(b){function c(a){for(var b=0,c=h.listeners.length;c>b;b++)h.listeners[b](a)}h.listeners||(h.listeners=[]),"onhashchange"in a&&(a.onhashchange=c),h.listeners.push(b)}},h=function(a){this.routes={},this.mount(a||{})};h.prototype.init=function(){var b=this;return this.handler=function(c){var d=c&&c.newURL||a.location.hash,e=d.replace(/.*#/,"");b.dispatch("on","/"===e.charAt(0)?e:"/"+e)},g.init(this.handler),this},h.prototype.dispatch=function(a,b){var c=this,d=this.traverse(a,b.replace(/\?.*/,""),this.routes,"");return c.invoke(d,c),!0},h.prototype.invoke=function(a,b){var d;d=function(e){return Array.isArray(e)?c(e,d):"function"==typeof e?e.apply(b,a.captures||[]):void 0},c(a,d)},h.prototype.traverse=function(a,b,c,d){var e,f,g,h,i=[];for(var j in c)if(c.hasOwnProperty(j)){if(e=f=d+"/"+j,g=b.match(new RegExp("^"+f)),!g)continue;if(g[0]&&g[0]==b&&c[j][a])return h=[c[j][a]],h.matched=!0,h.captures=g.slice(1),h;if(h=this.traverse(a,b,c[j],e),h.matched)return h.length>0&&(i=i.concat(h)),i.matched=!0,i.captures=h.captures,i}return!1},h.prototype.insert=function(a,b,c,e){var f,g,h;return e=e||this.routes,h=b.shift(),/\:|\*/.test(h)&&!/\\d|\\w/.test(h)&&(h=d(h)),b.length>0?(e[h]=e[h]||{},this.insert(a,b,c,e[h])):(f=typeof e[h],"undefined"==f?(g={},g[a]=c,void(e[h]=g)):void 0)},h.prototype.mount=function(a,b){function c(b){var c=b.split("/"),f=""===c[0]||!1,g=f?"on":d;f&&c.shift(),e.insert(g,c,a[b])}if(a&&"object"==typeof a&&!Array.isArray(a)){var d,e=this;b=b||[],Array.isArray(b)||(b=b.split("/"));for(var f in a)a.hasOwnProperty(f)&&c(f)}},e.prototype.router=function(a){return new h(a)};var i={},j=/\\|'|\r|\n|\t|\u2028|\u2029/g,k={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};i.defaults=function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},i.templateSettings={evaluate:/<%([\S\s]+?)%>/g,interpolate:/<%=([\S\s]+?)%>/g,escape:/<%-([\S\s]+?)%>/g},i.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},i.template=function(a,b){var c,d=i.defaults({},i.templateSettings),e=new RegExp([d.escape.source,d.interpolate.source,d.evaluate.source].join("|")+"|$","g"),f=0,g="__p+='";if(a.replace(e,function(b,c,d,e,h){g+=a.slice(f,h).replace(j,function(a){return"\\"+k[a]}),c&&(g+="'+\n_.escape("+c+")+\n'"),d&&(g+="'+\n(obj."+d+")+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length}),g+="';\n",g="var __p='';\n"+g+"return __p;\n",c=new Function("obj",g),b)return c(b);var h=function(a){return c.call(this,a,i)};return h},e.prototype=e.extend(e.prototype,i)}(this);